<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>정부지원금 추천 챗봇</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9fbfc;
      color: #333;
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
    }

    h1, h2 {
      color: #005f73;
    }

    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 6px;
      margin-top: 40px;
    }

    ul {
      padding-left: 20px;
    }

    img {
      max-width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 10px;
    }

    .section {
      margin-bottom: 40px;
    }

    .highlight {
      background-color: #e0f2f1;
      padding: 8px 12px;
      border-radius: 5px;
      display: inline-block;
      font-weight: bold;
    }

    .tech-icons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .tech-icons img {
      width: 32px;
      height: 32px;
      vertical-align: middle;
    }

    .github-link {
      margin-top: 20px;
    }

    .github-link a {
      display: inline-block;
      text-decoration: none;
      color: #0a9396;
      font-weight: bold;
      margin-top: 10px;
    }

    .github-link a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>

  <h1>📁 팀 프로젝트: [정부지원금 추천 챗봇]</h1>

  <div class="section">
    <h2>📝 프로젝트 개요</h2>
    <p>질문에 맞는 정부지원금 정보를 추천해주는 Retrieval-Augmented Generation (RAG) 기반 챗봇 시스템입니다. 정부24 공공 서비스 데이터를 수집하고, Upstage의 Solar API와 LangChain을 활용하여 실시간으로 적절한 정보를 제공합니다.</p>
  </div>

  <div class="section">
    <h2>⏱️ 기간 및 인원</h2>
    <p><span class="highlight">기간:</span> 2025.03.01 ~ 2025.04.15</p>
    <p><span class="highlight">인원:</span> 총 3명</p>
  </div>

  <div class="section">
    <h2>🛠 기술 스택</h2>
    <p><strong>프로그래밍 언어 및 도구:</strong> Python, Jupyter Notebook, JSON, LangChain, Streamlit</p>
    <p><strong>임베딩 및 검색:</strong> Upstage Solar API, FAISS</p>
  </div>

  <div class="section">
    <h2>🔧 핵심 기능</h2>
    <ul>
      <li>✔ 정부24 API를 통해 JSON 형식의 지원금 정보 수집</li>
      <li>✔ 조건 필터링 기반으로 문서 청크를 구성 및 저장</li>
      <li>✔ Solar API를 활용한 질문 임베딩 및 유사 문서 검색</li>
      <li>✔ 문서+질문 기반 응답 생성을 위한 프롬프트 엔지니어링</li>
      <li>✔ 사용자가 선택한 조건에 따라 맞춤형 지원금 추천</li>
    </ul>

    <details>
      <summary style="cursor:pointer; color:#0a9396; margin-top:10px;">📸 데모 이미지 보기</summary>
      <img src="../images/05_Smart_Subsidy_Finder/service_demo1.png" alt="데모 서비스 화면1" style="margin-top:10px;">
      <img src="../images/05_Smart_Subsidy_Finder/service_demo2.png" alt="데모 서비스 화면2" style="margin-top:10px;">
    </details>

  </div>

  <div class="section">
    <h2>🧭 시스템 워크플로우</h2>
    <p>정부지원금 추천 챗봇은 아래와 같은 파이프라인 구조로 동작합니다. 데이터 수집부터 질문 응답까지의 전체 흐름을 시각화한 다이어그램입니다.</p>
    <div style="text-align: center;">
      <img src="../images/05_Smart_Subsidy_Finder/workflow.png" alt="RAG 파이프라인 워크플로우" style="max-width: 100%; border: 1px solid #ccc; border-radius: 8px; margin-top: 10px;">
      <p style="font-size: 0.9em; color: #555; margin-top: 6px;">▲ 전체 시스템 동작 흐름을 보여주는 워크플로우 다이어그램</p>
    </div>
  </div>

  <div class="section">
    <h2>🧑‍💻 내가 기여한 부분</h2>
    <ul>
      <li>
        ✔ <strong>정부24 데이터를 활용한 통합 파이프라인 설계 및 구축:</strong>
        정부24 API에서 제공하는 서로 다른 구조의 세 가지 JSON 데이터를 수집하여, 조건 기반 필드 병합 및 구조 정제를 통해 하나의 통합 문서로 변환하는 파이프라인을 설계하고 구현했습니다.
        단일 실행 파일로 데이터 수집부터 병합, 저장, 백업까지 자동화되도록 구성하여 확장성과 유지보수 편의성을 높였습니다.
      </li>
      <li>
        ✔ <strong>불필요한 임베딩 비용 최소화를 위한 구조적 중복 제거 알고리즘 설계:</strong>
        동일 서비스명 또는 동일 ID를 가진 중복 항목을 정제하고, 병합 유형별로 문자열 병합, 리스트 병합, 딕셔너리 병합 전략을 적용해 데이터를 약 26,000건에서 8,800건으로 압축하여
        불필요한 임베딩 비용을 크게 절감했습니다.
      </li>
      <li>
        ✔ <strong>임베딩 대상 문서 변경 추적 로직 구현:</strong>
        이전 JSON과 비교하여 변경된 서비스만 임베딩하도록 구조화된 비교 로직을 구현했습니다.
        서비스 ID 기준 매칭 후 각 필드 단위로 변경 여부를 확인하며, 자동으로 추가/수정/삭제 목록을 추출하여 최소한의 리소스로 RAG 시스템을 업데이트할 수 있도록 했습니다.
      </li>
      <li>
        ✔ <strong>LangChain과 Solar API 기반 RAG 응답 시스템 구축:</strong>
        LangChain을 기반으로 사용자의 질문에 따라 관련 문서를 검색하고, Solar API를 통해 한글 자연어 응답을 생성하는 전체 RAG 흐름을 구현했습니다.
        문서 검색 → 프롬프트 생성 → 응답 생성의 구조를 갖추었으며, 검색 결과가 없을 때의 fallback 응답까지 고려하여 시스템 안정성을 확보했습니다.
      </li>
    </ul>
  </div>

  <div class="section">
    <h2>🐛 트러블슈팅</h2>

    <h3>📌 문제 1: 임베딩 비용 급증</h3>
    <p><strong>- 문제 배경:</strong> 수집한 정부지원금 데이터는 구조상 중복 항목이 많았으며, 이로 인해 벡터 임베딩 대상 문서 수가 급격히 증가하여 저장 비용 및 쿼리 성능 저하가 발생할 가능성이 컸습니다.</p>
    <p><strong>- 해결 방법:</strong> 중복 유형(완전 동일, ID 동일/내용 다름, 이름 동일/ID 다름)에 따라 병합 전략을 달리 설정하고, 리스트는 중복 제거 후 병합, 문자열은 구분자(||) 병합, 딕셔너리는 key 기준 통합하는 알고리즘을 구현하여 중복을 정제하고 임베딩 비용을 약 66% 이상 절감했습니다.</p>

    <h3>📌 문제 2: 변경된 문서만 임베딩하는 방법의 구현 난점</h3>
    <p><strong>- 문제 배경:</strong> 데이터가 정기적으로 변경되기 때문에 전체를 다시 임베딩하면 비효율적이었습니다. 그러나 JSON의 구조가 복잡하고 단순한 해시 비교로는 내용 변경을 탐지하기 어려웠습니다.</p>
    <p><strong>- 해결 방법:</strong> 이전 JSON을 백업한 뒤, 현재 JSON과 구조적으로 비교하는 로직을 도입했습니다. 서비스 ID 기준으로 매칭한 뒤, 내부 필드 내용을 정밀 비교하여 변경 여부를 판단하고, 변경된 문서만 임베딩하는 효율적인 업데이트 구조를 구현했습니다.</p>
  </div>

  <div class="section">
    <h2>🌟 팀 성과</h2>
    <ul>
      <li>✔ 실제 정부 문서 기반으로 높은 정밀도의 맞춤형 추천 시스템 구현</li>
      <li>✔ Solar 임베딩 기반 검색과 LangChain 흐름을 안정적으로 통합</li>
      <li>✔ 프롬프트 설계에 따라 응답 품질 차이를 명확히 확인하고 개선</li>
    </ul>
  </div>

  <div class="section">
    <h2>💡 깨달은 점</h2>
    <p>기존 RAG 구조를 실제 정부 문서에 적용하면서, 단순 문서 요약이 아닌 조건 기반 질의 응답이 얼마나 섬세한 문맥 처리와 프롬프트 설계에 달려 있는지를 깨달았습니다. 사용자의 질문에 직접적으로 연결되는 정보의 흐름을 구성하는 것이 핵심이라는 점을 학습할 수 있었습니다.</p>
  </div>

  <div class="section">
    <h2>🔗 참고 링크</h2>
    <ul>
      <li>📁 GitHub 저장소: <span style="color: #999;">비공개 저장소입니다</span></li>
    </ul>
  </div>


</body>
</html>